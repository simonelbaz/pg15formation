%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Optimisation}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Les indexes dans PostgreSQL}


   \begin{itemize}
      \item B-Tree Index - très utile pour la recherche d'une valeur ou le scan d'une plage de valeur. Utilisé également pour les expressions régulières (pattern matching)
      \item Hash Index - très efficace pour recherche de valeurs égales
      \item Generalized Search Tree (GiST) - est une catégorie d'index offrant une architecture dans laquelle plusieurs stratégies d'indexes peuvent être implémentées. En fonction de ces stratégies, des opérateurs (\textit{operator class}) sont définies.
      \item Par exemple, la distribution standard de PostgreSQL inclut des opérateurs de classe GisT pour les types de données à 2 dimensions
      \item Les indexes GiST sont aussi capables d'optimiser les recherches de type \textbf{"voisinage le plus proche"}
   \end{itemize}

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/indexes-types.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Les indexes dans PostgreSQL}


   \begin{itemize}
      \item Space Partitioned GiST (SP-GiST) - similar au GiST, cette classe d'index supporte des structures de données non équilibrées
      \item Generalized Inverted Index (GIN) - utile pour indexer des valeurs de type multi-composants comme des tableaux. et tester la présence d'un élément
      \item Tout comme la famille GiST, la famille GIN supporte des stratégies d'indexation personnalisables par l'utilisateur. Les opérateurs de la cette classe d'index dépendent de la stratégie d'indexation.
      \item Block Range Index (BRIN) - ce type d'index stocke des résumés d'information pour des blocs contigus et physiques de données. Ce type d'index est bien adapté aux données corrélées avec l'ordre physique de stockage
      \item Tout comme la famille GiST, la famille BRIN supporte des stratégies d'indexation personnalisables par l'utilisateur. Les opérateurs de la cette classe d'index dépendent de la stratégie d'indexation.
      \item L'index de type BRIN contient le min et le max de chaque bloc de données linéaire
   \end{itemize}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{EXPLAIN PLAN}

   TODO
   WIP

\begin{toile}
\toileurl{XXXX}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Index only scans}
   \label(indexonlyscan)

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/indexes-index-only-scans.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{La commande CLUSTER}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/sql-cluster.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Utilisation des statistiques par le planificateur de requêtes}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/planner-stats.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Statistiques accumulées pendant le service - Run-time statistics}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/runtime-config-statistics.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Statistiques étendues}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/current/planner-stats.html\#PLANNER-STATS-EXTENDED}
\toileurl{https://www.postgresql.org/docs/current/multivariate-statistics-examples.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Requêtes parallèles}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/parallel-query.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Amélioration des performances}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/performance-tips.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{Tests de performances}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/pgbench.html}
\end{toile}

\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}[fragile]{HOT - Heap-Only Tuples}

   TODO
   WIP

\begin{toile}
\toileurl{https://www.postgresql.org/docs/15/storage-hot.html}
\end{toile}

\end{frame}

